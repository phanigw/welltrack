*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
  --bg:#f2f2f7;--card:#fff;--text:#1c1c1e;--text2:#8e8e93;--border:#e5e5ea;
  --primary:#007aff;--green:#34c759;--red:#ff3b30;--orange:#ff9500;--purple:#af52de;--teal:#5ac8fa;
  --gold-bg:#fff8e1;--gold-text:#f9a825;--silver-bg:#eceff1;--silver-text:#78909c;
  --bronze-bg:#efebe9;--bronze-text:#8d6e63;--fail-bg:#ffebee;--fail-text:#e53935;
  --safe-top:env(safe-area-inset-top);--safe-bot:env(safe-area-inset-bottom);
}
body{
  font-family:-apple-system,BlinkMacSystemFont,'SF Pro Text',system-ui,sans-serif;
  background:var(--bg);color:var(--text);font-size:15px;line-height:1.4;
  overscroll-behavior:none;-webkit-user-select:none;user-select:none;
}
input,button,select,textarea{font-family:inherit;font-size:inherit}
input[type=number],input[type=text]{-webkit-user-select:text;user-select:text}

/* ── Layout ── */
#app{display:flex;flex-direction:column;height:100vh;height:100dvh}
.screens{flex:1;overflow:hidden;position:relative}
.screen{
  position:absolute;inset:0;overflow-y:auto;-webkit-overflow-scrolling:touch;
  display:none;padding:12px 16px;
  padding-top:calc(12px + var(--safe-top));padding-bottom:16px;
}
.screen.active{display:block}

/* ── Navbar ── */
#navbar{
  display:flex;background:var(--card);border-top:1px solid var(--border);
  padding-bottom:var(--safe-bot);flex-shrink:0;
}
#navbar button{
  flex:1;border:none;background:none;padding:10px 4px 6px;
  font-size:10px;color:var(--text2);display:flex;flex-direction:column;
  align-items:center;gap:2px;cursor:pointer;
}
#navbar button.active{color:var(--primary)}
#navbar button svg{width:24px;height:24px}

/* ── Common ── */
.screen-title{font-size:28px;font-weight:700;margin-bottom:16px}
.nav-bar{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.nav-btn{
  width:36px;height:36px;border-radius:50%;border:none;background:var(--card);
  font-size:18px;cursor:pointer;display:flex;align-items:center;justify-content:center;
  box-shadow:0 1px 3px rgba(0,0,0,.1);
}
.nav-label{font-size:17px;font-weight:600;text-align:center}

/* ── Cards ── */
.card{
  background:var(--card);border-radius:12px;padding:14px;margin-bottom:12px;
  box-shadow:0 1px 3px rgba(0,0,0,.06);
}
.card-title{
  font-size:15px;font-weight:600;margin-bottom:10px;display:flex;
  align-items:center;justify-content:space-between;
}

/* ── Circles ── */
.circles-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px}
.circle-wrap{display:flex;flex-direction:column;align-items:center;gap:4px}
.circle-container{position:relative;width:90px;height:90px}
.circle-container svg{width:100%;height:100%;transform:rotate(-90deg)}
.circle-container .ring-bg{fill:none;stroke:var(--border);stroke-width:7}
.circle-container .ring-fg{
  fill:none;stroke-width:7;stroke-linecap:round;
  transition:stroke-dashoffset .4s ease,stroke .3s ease;
}
.circle-label{font-size:11px;color:var(--text2);font-weight:500;text-align:center}
.circle-val{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  font-size:11px;font-weight:600;text-align:center;line-height:1.2;pointer-events:none;
}
.circle-val small{font-size:9px;font-weight:400;color:var(--text2);display:block}

/* ── Steps ── */
.steps-row{display:flex;align-items:center;gap:12px;margin-bottom:12px}
.steps-row .circle-container{width:70px;height:70px;flex-shrink:0}
.steps-input-wrap{flex:1}
.steps-input-wrap input{
  width:100%;padding:8px 10px;border:1px solid var(--border);
  border-radius:8px;font-size:16px;text-align:center;
}
.steps-input-wrap .steps-target{font-size:11px;color:var(--text2);text-align:center;margin-top:4px}

/* ── Wellness ── */
.wellness-row{display:flex;gap:12px;margin-bottom:16px}
.wellness-item{
  flex:1;background:var(--card);border-radius:12px;padding:12px;
  box-shadow:0 1px 3px rgba(0,0,0,.06);
  display:flex;flex-direction:column;align-items:center;gap:6px;
}
.wellness-item label{font-size:12px;color:var(--text2);font-weight:500}

/* ── Toggle ── */
.toggle{position:relative;width:51px;height:31px;display:inline-block;flex-shrink:0}
.toggle input{opacity:0;width:0;height:0}
.toggle-track{
  position:absolute;inset:0;background:#e9e9eb;border-radius:16px;transition:background .25s;
}
.toggle input:checked+.toggle-track{background:var(--green)}
.toggle-knob{
  position:absolute;top:2px;left:2px;width:27px;height:27px;
  background:#fff;border-radius:50%;box-shadow:0 1px 3px rgba(0,0,0,.2);transition:transform .25s;
}
.toggle input:checked~.toggle-knob{transform:translateX(20px)}

/* ── Sleep ── */
.sleep-input{display:flex;align-items:center;gap:6px}
.sleep-input input{
  width:52px;padding:6px;border:1px solid var(--border);border-radius:8px;
  font-size:16px;text-align:center;
}
.sleep-input span{font-size:13px;color:var(--text2)}

/* ── Score ── */
.score-badge{
  display:inline-block;padding:3px 10px;border-radius:12px;font-size:12px;
  font-weight:700;text-transform:uppercase;letter-spacing:.5px;
}
.score-badge.gold{background:var(--gold-bg);color:var(--gold-text)}
.score-badge.silver{background:var(--silver-bg);color:var(--silver-text)}
.score-badge.bronze{background:var(--bronze-bg);color:var(--bronze-text)}
.score-badge.fail{background:var(--fail-bg);color:var(--fail-text)}
.score-detail{font-size:12px;color:var(--text2);margin-top:4px;text-align:center}

/* ── Day Items ── */
.meal-section{margin-bottom:12px}
.meal-section-hdr{
  font-size:14px;font-weight:600;padding:8px 0;color:var(--text2);
  text-transform:uppercase;letter-spacing:.5px;border-bottom:1px solid var(--border);
}
.day-item{
  display:flex;align-items:flex-start;padding:10px 0;
  border-bottom:1px solid #f0f0f0;gap:10px;
}
.day-item:last-child{border-bottom:none}
.day-item.checked .day-item-name{color:var(--text2)}
.day-check{
  width:22px;height:22px;border-radius:6px;border:2px solid var(--border);
  background:none;cursor:pointer;flex-shrink:0;margin-top:1px;
  display:flex;align-items:center;justify-content:center;transition:all .2s;
}
.day-check.on{background:var(--green);border-color:var(--green)}
.day-check.on::after{
  content:'';display:block;width:6px;height:10px;
  border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg);margin-top:-2px;
}
.day-item-body{flex:1;min-width:0}
.day-item-name{font-size:15px;font-weight:500}
.day-item-qty{
  display:flex;align-items:center;gap:4px;margin-top:4px;font-size:13px;color:var(--text2);
}
.day-item-qty input{
  width:48px;padding:3px 4px;border:1px solid var(--border);
  border-radius:6px;font-size:14px;text-align:center;
}
.day-item-qty input:disabled{background:#f5f5f5;color:#bbb}
.day-item-cal{
  font-size:13px;font-weight:600;color:var(--text2);white-space:nowrap;
  margin-top:2px;flex-shrink:0;
}

/* ── Extras ── */
.extras-hdr{
  display:flex;align-items:center;justify-content:space-between;margin:16px 0 8px;
}
.extras-hdr span{
  font-size:14px;font-weight:600;color:var(--orange);
  text-transform:uppercase;letter-spacing:.5px;
}
.extra-item{
  display:flex;align-items:center;padding:8px 10px;background:#fff8f0;
  border-radius:8px;margin-bottom:6px;gap:8px;
}
.extra-item-info{flex:1;min-width:0}
.extra-item-name{font-size:14px;font-weight:500}
.extra-item-macros{font-size:11px;color:var(--text2)}
.extra-del{
  width:24px;height:24px;border:none;background:none;color:var(--red);
  font-size:18px;cursor:pointer;flex-shrink:0;
}
.extra-form{
  background:var(--card);border-radius:10px;padding:12px;margin-bottom:10px;
  border:1px solid var(--border);
}
.extra-form input{
  width:100%;padding:8px;border:1px solid var(--border);border-radius:8px;
  margin-bottom:8px;font-size:15px;
}
.extra-form .ef-grid{
  display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px;
}
.extra-form .ef-grid label{font-size:11px;color:var(--text2);display:block;margin-bottom:2px}
.extra-form .ef-grid input{margin-bottom:0}
.ef-btns{display:flex;gap:8px;justify-content:flex-end}

/* ── Buttons ── */
.btn{padding:10px 18px;border:none;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer}
.btn-primary{background:var(--primary);color:#fff}
.btn-secondary{background:var(--border);color:var(--text)}
.btn-sm{padding:6px 14px;font-size:13px;border-radius:8px}
.btn-add{
  width:100%;padding:10px;border:2px dashed var(--border);border-radius:10px;
  background:none;font-size:14px;color:var(--text2);cursor:pointer;margin-top:8px;
}
.btn-add:active{background:#f0f0f0}
.btn-danger{background:none;border:none;color:var(--red);font-size:14px;cursor:pointer;padding:4px}

/* ── Calendar ── */
.cal-weekdays{
  display:grid;grid-template-columns:repeat(7,1fr);text-align:center;
  font-size:11px;font-weight:600;color:var(--text2);margin-bottom:6px;
}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:4px}
.cal-day{
  aspect-ratio:1;border-radius:10px;display:flex;flex-direction:column;
  align-items:center;justify-content:center;cursor:pointer;position:relative;
  font-size:14px;font-weight:500;background:var(--card);min-height:44px;
}
.cal-day.empty{background:transparent;cursor:default}
.cal-day.today{box-shadow:inset 0 0 0 2px var(--primary)}
.cal-day.other-month{color:#ccc}
.cal-day.gold{background:var(--gold-bg)}
.cal-day.silver{background:var(--silver-bg)}
.cal-day.bronze{background:var(--bronze-bg)}
.cal-day.fail{background:var(--fail-bg)}
.cal-day .cal-icons{position:absolute;bottom:2px;font-size:8px;display:flex;gap:1px}
.cal-day .cal-num{font-size:14px}

/* ── Plan Editor ── */
.plan-meal{
  background:var(--card);border-radius:12px;margin-bottom:14px;
  overflow:hidden;box-shadow:0 1px 3px rgba(0,0,0,.06);
}
.plan-meal-hdr{
  display:flex;align-items:center;padding:12px 14px;gap:8px;
  background:#fafafa;border-bottom:1px solid var(--border);
}
.plan-meal-hdr input{
  flex:1;border:none;background:none;font-size:16px;font-weight:600;padding:2px;
}
.plan-items{padding:8px 14px}
.plan-item{padding:10px 0;border-bottom:1px solid #f0f0f0}
.plan-item:last-child{border-bottom:none}
.plan-item-row{display:flex;gap:6px;align-items:center;margin-bottom:6px}
.plan-item-row:last-child{margin-bottom:0}
.plan-item-row input[type=text]{
  flex:1;border:1px solid var(--border);border-radius:8px;padding:7px 8px;
}
.plan-item .pi-macros{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
.plan-item .pi-macros label{font-size:10px;color:var(--text2);display:block;margin-bottom:2px}
.plan-item .pi-macros input{
  width:100%;border:1px solid var(--border);border-radius:6px;
  padding:6px 4px;text-align:center;font-size:13px;
}
.plan-item .pi-qty{display:flex;gap:6px}
.plan-item .pi-qty input{
  border:1px solid var(--border);border-radius:6px;padding:6px 8px;font-size:13px;
}
.plan-item .pi-qty input:first-child{width:60px;text-align:center}
.plan-item .pi-qty input:last-child{flex:1}

.plan-actions{display:flex;gap:10px;margin-top:16px;padding-bottom:20px}
.plan-actions .btn{flex:1}

/* ── Settings ── */
.settings-card{margin-bottom:16px}
.setting-row{
  display:flex;align-items:center;justify-content:space-between;padding:10px 0;
  border-bottom:1px solid #f0f0f0;
}
.setting-row:last-child{border-bottom:none}
.setting-row label{font-size:14px;font-weight:500}
.setting-row input{
  width:80px;padding:6px 8px;border:1px solid var(--border);
  border-radius:8px;font-size:15px;text-align:center;
}

.empty-msg{text-align:center;color:var(--text2);padding:40px 20px;font-size:15px}
